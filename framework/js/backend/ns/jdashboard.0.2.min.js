/**
 * MAGIX CMS
 * @copyright  MAGIX CMS Copyright (c) 2011 - 2012 Gerits Aurelien, 
 * http://www.magix-cms.com, http://www.magix-cjquery.com
 * @license    Dual licensed under the MIT or GPL Version 3 licenses.
 * @version    0.2
 * @author Gérits Aurélien <aurelien@magix-cms.com>
 * @name ns_jdashboard
 *
 */
var ns_jdashboard={init:function(){},_version:function(){if($.ieTester()){$("#version").ajaxStart(function(){$(this).append('...loading')});$("#version").ajaxError(function(){$(this).append("Error requesting page")});$.get("/admin/version.php",function(a){$("#version").html(a)})}else{$.ajax({type:"get",url:"/admin/version.php",statusCode:{0:function(){console.error("jQuery Error")},401:function(){console.warn("access denied")},404:function(){console.warn("object not found")},403:function(){console.warn("request forbidden")},408:function(){console.warn("server timed out waiting for request")},500:function(){console.error("Internal Server Error")}},async:false,beforeSend:function(){$("#version").html('')},success:function(a){$(".min-loader").remove();$("#version").html(a)}})}},_deleteHome:function(){$(".deletehome").live("click",function(b){b.preventDefault();var a=$(this).attr("rel");$("#dialog_delete").dialog({bgiframe:true,resizable:false,height:140,modal:true,buttons:{Delete:function(){$(this).dialog("close");$.ajax({type:"post",url:"/admin/home.php",data:"del_home="+a,async:false,cache:false,success:function(){location.reload()}})},Cancel:function(){$(this).dialog("close")}}})})},_deleteNews:function(){$(".deletenews").click(function(b){b.preventDefault();var a=$(this).attr("rel");$("#dialog_delete").dialog({bgiframe:true,resizable:false,height:140,modal:true,title:"Suppression d'un article",buttons:{"Delete News":function(){$(this).dialog("close");$.ajax({type:"post",url:"/admin/news.php",data:"delnews="+a,async:false,cache:false,success:function(){location.reload()}})},Cancel:function(){$(this).dialog("close")}}})})},_publishedNews:function(){$(".u-news-published").live("click",function(b){b.preventDefault();var a=$(this).attr("href");$("#confirm_published").dialog({resizable:false,height:140,width:320,modal:true,buttons:{"En ligne":function(){$(this).dialog("close");$.ajax({type:"post",url:a,data:"status_news=1",async:false,success:function(c){location.reload()}});return false},"Hors ligne":function(){$(this).dialog("close");$.ajax({type:"post",url:a,data:"status_news=0",async:false,success:function(c){location.reload()}});return false},Cancel:function(){$(this).dialog("close")}}})})},_deletePage:function(){$(".delpage").live("click",function(a){a.preventDefault();var b=$(this).attr("rel");$("#dialog_delete").dialog({bgiframe:true,resizable:false,height:140,modal:true,buttons:{Delete:function(){$(this).dialog("close");$.ajax({type:"post",statusCode:{0:function(){console.error("jQuery Error")},401:function(){console.warn("access denied")},404:function(){console.warn("object not found")},403:function(){console.warn("request forbidden")},408:function(){console.warn("server timed out waiting for request")},500:function(){console.error("Internal Server Error")}},url:"/admin/cms.php",data:"delpage="+b,async:false,cache:false,success:function(c){location.reload()}})},Cancel:function(){$(this).dialog("close")}}})})},_deleteProduct:function(){$(".deleteproduct").live("click",function(b){b.preventDefault();var a=$(this).attr("title");$("#dialog_delete").dialog({bgiframe:true,resizable:false,minHeight:180,modal:true,title:"Supprimé ce produit",buttons:{"Delete item":function(){$(this).dialog("close");$.notice({ntype:"ajax",uri:"/admin/catalog.php?product&delproduct="+a,typesend:"get",delay:1800,time:1,reloadhtml:true})},Cancel:function(){$(this).dialog("close")}}})})},deleteElem:function(){this._deleteHome();this._deleteNews();this._deletePage();this._deleteProduct()},run:function(){this._version();this._publishedNews();this.deleteElem()}};